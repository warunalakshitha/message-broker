# Copyright (c) 2017, WSO2 Inc. (http://www.wso2.org) All Rights Reserved.
#
# WSO2 Inc. licenses this file to you under the Apache License,
# Version 2.0 (the "License"); you may not use this file except
# in compliance with the License.
# You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.

# Broker Configurations.
wso2.broker:
 # Datasource configurations used to communicate with the database.
 dataSource:
  # Database URL.
  url: jdbc:derby:database
  # Database username.
  user: root
  # Database password.
  password: root

# Broker auth related configurations.
wso2.broker.auth:
 # Broker authentication related configurations.
 authentication:
  # Enable the authentication
  enabled: true
  jaas:
   # JAAS login module used to authenticate users
   loginModule: org.wso2.broker.auth.authentication.jaas.BrokerLoginModule
  #Broker authentication related configurations.
 authorization:
  # Enable the authorization
  enabled: true
  # Permission cache related configs
  permissionCache:
   # Cache timeout in minutes
   cacheTimeout: 15
   # Maximum no. of cache elements
   cacheSize: 5000

# AMQP transport related configurations.
wso2.broker.transport.amqp:
 # Hostname configuration used in creating the server socket
 hostName: localhost

 # Maximum number of redeliveries before publishing a message to the DLX (dead letter exchange).
 maxRedeliveryCount: 5

 # Publisher flow control related configs.
 channelFlow:
  # The low limit used to enable channel flow when it is disabled. Value corresponds to the number of messages.
  lowLimit: 100
  # The high limit used to disable channel flow when it is enabled. Value corresponds to the number of messages.
  highLimit: 1000

 # Nonsecured transport configurations.
 plain:
  # Port used for the nonsecured transport.
  port: 5672

 # Secured transport configuration.
 ssl:
  # Indicate if secured transport is enabled. Accepted values are 'true' or 'false'.
  enabled: true
  # Port used to bind the secured transport.
  port: 8672
  # Secure protocol used to encrypt data.
  protocol: TLS

  # Keystore configurations used in creating the secure transport.
  keyStore:
   # Type of the keystore file.
   type: JKS
   # Location of the keystore file. The path can be relative to broker home or absolute path.
   location: resources/security/keystore.jks
   # Keystore password.
   password: wso2carbon
   # Cert type used in the keystore file.
   certType: SunX509

  # Truststore configurations used in creating the secure transport.
  trustStore:
   # Type of truststore file.
   type: JKS
   # Location of the keystore file. The path can be relative to broker home or absolute path.
   location: resources/security/client-truststore.jks
   # Truststore password.
   password: wso2carbon
   # Cert type used in the truststore file
   certType: SunX509

# Failover related configurations
wso2.broker.failover:
 # Whether or not failover is enabled
 enabled: true
 # The strategy to use in providing failover
 strategy: org.wso2.broker.coordination.rdbms.RdbmsHaStrategy
 # Properties/options required by the strategy
 options:
  heartbeatInterval: 5000
  coordinatorEntryCreationWaitTime: 3000

# Admin service related configurations.
wso2.broker.admin.service:
 plain:
  # Hostname configuration used in creating server socket
  hostName: localhost
  # Port used for the nonsecured admin service.
  port: 9000
